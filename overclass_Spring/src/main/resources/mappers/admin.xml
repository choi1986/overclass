<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
	<insert id="report">
		insert into oc_report (reportno, reporter, dno, content)
		values (oc_report_seq.nextval, #{reporter}, #{dno}, #{content})
	</insert>
		
	<select id="list" resultType="report">
		select oc_report.dno, oc_document.writer, oc_document.content, tag, 
		image, goodcnt, user_image, reportno, oc_report.content report_content, reporter, 
		TO_CHAR(reportdate,'<![CDATA[yyyy"년" mm"월" dd"일" hh24"시" mi"분"]]>') reportdate
		from oc_document, oc_user, oc_report
		where oc_document.dno = oc_report.dno AND oc_user.user_id = oc_document.writer
	</select>
	
	<select id="report_count" resultType="int">
		select count(*) cnt
		from oc_report
	</select>
	
	<insert id="ban">
		
	</insert>
</mapper>
